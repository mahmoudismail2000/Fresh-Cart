"use strict";(self.webpackChunkfresh_cart=self.webpackChunkfresh_cart||[]).push([[136],{1136:(N,_,l)=>{l.r(_),l.d(_,{ForgotPasswordComponent:()=>k});var g=l(6814),n=l(95),t=l(4769),f=l(9862);let p=(()=>{class s{constructor(o){this._HttpClient=o,this.baseUrl="https://ecommerce.routemisr.com/api/v1/auth/"}forgotPassword(o){return this._HttpClient.post(this.baseUrl+"forgotPasswords",o)}verifyResetCode(o){return this._HttpClient.post(this.baseUrl+"verifyResetCode",o)}updateResetPassword(o){return this._HttpClient.put(this.baseUrl+"resetPassword",o)}static#t=this.\u0275fac=function(e){return new(e||s)(t.LFG(f.eN))};static#o=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var w=l(1120);function P(s,m){1&s&&(t.TgZ(0,"p",16),t._uU(1,"Email Required"),t.qZA())}function x(s,m){1&s&&(t.TgZ(0,"p",16),t._uU(1,"Email InValid"),t.qZA())}function C(s,m){if(1&s&&(t.TgZ(0,"div",14),t.YNc(1,P,2,0,"p",15),t.YNc(2,x,2,0,"p",15),t.qZA()),2&s){const o=t.oxw(2);let e,r;t.xp6(1),t.Q6J("ngIf",null==(e=o.forgotPasswordForm.get("email"))?null:e.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(r=o.forgotPasswordForm.get("email"))?null:r.getError("email"))}}function h(s,m){if(1&s&&(t.TgZ(0,"div",17)(1,"p",18),t._uU(2),t.qZA()()),2&s){const o=t.oxw(2);t.xp6(2),t.Oqu(o.msgSuccessForgot)}}function F(s,m){if(1&s){const o=t.EpF();t.TgZ(0,"form",6),t.NdJ("ngSubmit",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.forgotPassword())}),t.TgZ(1,"div")(2,"label",7),t._UZ(3,"i",8),t._uU(4,"Email"),t.qZA(),t._UZ(5,"input",9,10),t.YNc(7,C,3,2,"div",11),t.qZA(),t.TgZ(8,"button",12),t._uU(9,"Send Email"),t.qZA(),t.YNc(10,h,3,1,"div",13),t.qZA()}if(2&s){const o=t.MAs(6),e=t.oxw();let r;t.Q6J("formGroup",e.forgotPasswordForm),t.xp6(7),t.Q6J("ngIf",(null==(r=e.forgotPasswordForm.get("email"))?null:r.errors)&&((null==(r=e.forgotPasswordForm.get("email"))?null:r.touched)||o.value.length>0)),t.xp6(3),t.Q6J("ngIf",e.msgSuccessForgot)}}function Z(s,m){if(1&s&&(t.TgZ(0,"div",17)(1,"p",18),t._uU(2),t.qZA()()),2&s){const o=t.oxw(2);t.xp6(2),t.Oqu(o.msgSuccessResetCode)}}function v(s,m){if(1&s){const o=t.EpF();t.TgZ(0,"form",6),t.NdJ("ngSubmit",function(){t.CHM(o);const r=t.MAs(5),i=t.MAs(7),a=t.MAs(9),d=t.MAs(11),u=t.MAs(13),c=t.MAs(15),I=t.oxw();return t.KtG(I.resetCode(r,i,a,d,u,c))}),t.TgZ(1,"p",19),t._uU(2,"Please Check Your Email And Enter The Code ..."),t.qZA(),t.TgZ(3,"div",20)(4,"input",21,22),t.NdJ("keyup",function(r){t.CHM(o);const i=t.MAs(7),a=t.oxw();return t.KtG(a.keyCode(r,i))}),t.qZA(),t.TgZ(6,"input",21,23),t.NdJ("keyup",function(r){t.CHM(o);const i=t.MAs(9),a=t.oxw();return t.KtG(a.keyCode(r,i))}),t.qZA(),t.TgZ(8,"input",21,24),t.NdJ("keyup",function(r){t.CHM(o);const i=t.MAs(11),a=t.oxw();return t.KtG(a.keyCode(r,i))}),t.qZA(),t.TgZ(10,"input",21,25),t.NdJ("keyup",function(r){t.CHM(o);const i=t.MAs(13),a=t.oxw();return t.KtG(a.keyCode(r,i))}),t.qZA(),t.TgZ(12,"input",21,26),t.NdJ("keyup",function(r){t.CHM(o);const i=t.MAs(15),a=t.oxw();return t.KtG(a.keyCode(r,i))}),t.qZA(),t.TgZ(14,"input",21,27),t.NdJ("keyup",function(r){t.CHM(o);const i=t.MAs(17),a=t.oxw();return t.KtG(a.keyCode(r,i))}),t.qZA()(),t.TgZ(16,"button",12,28),t._uU(18,"Reset Code"),t.qZA(),t.YNc(19,Z,3,1,"div",13),t.qZA()}if(2&s){const o=t.oxw();t.Q6J("formGroup",o.resetCodeForm),t.xp6(19),t.Q6J("ngIf",o.msgSuccessResetCode)}}function T(s,m){1&s&&(t.TgZ(0,"p",16),t._uU(1,"ResetPassword Required"),t.qZA())}function A(s,m){1&s&&(t.TgZ(0,"p",16),t._uU(1,"ResetPassword InValid"),t.qZA())}function y(s,m){if(1&s&&(t.TgZ(0,"div",14),t.YNc(1,T,2,0,"p",15),t.YNc(2,A,2,0,"p",15),t.qZA()),2&s){const o=t.oxw(2);let e,r;t.xp6(1),t.Q6J("ngIf",null==(e=o.forgotPasswordForm.get("newPassword"))?null:e.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(r=o.forgotPasswordForm.get("newPassword"))?null:r.getError("newPassword"))}}function q(s,m){if(1&s&&(t.TgZ(0,"div",17)(1,"p",18),t._uU(2),t.qZA()()),2&s){const o=t.oxw(2);t.xp6(2),t.Oqu(o.msgSuccessResetPassword)}}function R(s,m){if(1&s){const o=t.EpF();t.TgZ(0,"form",6),t.NdJ("ngSubmit",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.resetPassword())}),t.TgZ(1,"div")(2,"label",29),t._uU(3,"ResetPassword"),t.qZA(),t._UZ(4,"input",30,31),t.YNc(6,y,3,2,"div",11),t.qZA(),t.TgZ(7,"button",12),t._uU(8,"Reset Password"),t.qZA(),t.YNc(9,q,3,1,"div",13),t.qZA()}if(2&s){const o=t.MAs(5),e=t.oxw();let r;t.Q6J("formGroup",e.resetPasswordForm),t.xp6(6),t.Q6J("ngIf",(null==(r=e.forgotPasswordForm.get("newPassword"))?null:r.errors)&&((null==(r=e.forgotPasswordForm.get("newPassword"))?null:r.touched)||o.value.length>0)),t.xp6(3),t.Q6J("ngIf",e.msgSuccessResetPassword)}}let k=(()=>{class s{constructor(o,e,r){this._ForgotPAsswordService=o,this._Router=e,this._Renderer2=r,this.isForgot=!0,this.isResetCode=!1,this.isResetPassword=!1,this.msgSuccessForgot="",this.msgSuccessResetCode="",this.msgSuccessResetPassword="",this.resetCodeFromEmail="",this.emailOfUser="",this.forgotPasswordForm=new n.cw({email:new n.NI("",[n.kI.required,n.kI.email])}),this.resetCodeForm=new n.cw({resetCode:new n.NI("",[n.kI.required])}),this.resetPasswordForm=new n.cw({newPassword:new n.NI("",[n.kI.required,n.kI.pattern(/^[A-Z][a-z0-9]{6,10}$/)])})}forgotPassword(){this.emailOfUser=this.forgotPasswordForm.value.email,this._ForgotPAsswordService.forgotPassword(this.forgotPasswordForm.value).subscribe({next:o=>{console.log(o),"success"==o.statusMsg&&(this.isForgot=!1,this.isResetCode=!0)},error:o=>{console.log(o),this.msgSuccessForgot=o.error.message}})}resetCode(o,e,r,i,a,d){let u=this.resetCodeForm.value;u.resetCode=o.value+e.value+r.value+i.value+a.value+d.value,console.log(u),this._ForgotPAsswordService.verifyResetCode(u).subscribe({next:c=>{console.log(c),"Success"==c.status&&(console.log(c),this.isResetCode=!1,this.isResetPassword=!0)},error:c=>{console.log(c),this.msgSuccessResetCode=c.error.message}})}resetPassword(){let o=this.resetPasswordForm.value;o.email=this.emailOfUser,console.log(o),this._ForgotPAsswordService.updateResetPassword(o).subscribe({next:e=>{null!=e.token&&(localStorage.setItem("eToken",e.token),this._Router.navigate(["/home"]))},error:e=>{console.log(e),this.msgSuccessResetCode=e.error.message}})}keyCode(o,e){1==o.target.value.length&&e.focus()}static#t=this.\u0275fac=function(e){return new(e||s)(t.Y36(p),t.Y36(w.F0),t.Y36(t.Qsj))};static#o=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-forgot-password"]],standalone:!0,features:[t.jDz],decls:11,vars:3,consts:[[1,"my-5"],[1,"row","d-flex","justify-content-center","align-items-center"],[1,"col-md-7"],["src","./assets/Secure login-rafiki.svg","height","500","alt","Forgot Password",1,"w-100"],[1,"col-md-5","p-4","bg-main-light","shadow","rounded-2","mx-auto"],["class","my-3",3,"formGroup","ngSubmit",4,"ngIf"],[1,"my-3",3,"formGroup","ngSubmit"],["for","email"],[1,"fa-solid","fa-envelope","me-2"],["type","email","id","email","formControlName","email",1,"form-control","mt-2"],["forgotPass",""],["class","alert alert-danger mx-auto w-100 mt-2",4,"ngIf"],[1,"btn-main","w-100","my-3"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger","mx-auto","w-100","mt-2"],["class","mb-0",4,"ngIf"],[1,"mb-0"],[1,"alert","alert-danger"],[1,"mb-0","text-center"],[1,""],[1,"d-flex","justify-content-center"],["type","text","maxlength","1",1,"form-control","reset",3,"keyup"],["txt1",""],["txt2",""],["txt3",""],["txt4",""],["txt5",""],["txt6",""],["resetButton",""],["for","newPassword"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control","mt-2"],["resetPasswordRef",""]],template:function(e,r){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div"),t._UZ(4,"img",3),t.qZA()(),t.TgZ(5,"div",4)(6,"h2"),t._uU(7,"Forgot Your Password ..?"),t.qZA(),t.YNc(8,F,11,3,"form",5),t.YNc(9,v,20,2,"form",5),t.YNc(10,R,10,3,"form",5),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("ngIf",r.isForgot),t.xp6(1),t.Q6J("ngIf",r.isResetCode),t.xp6(1),t.Q6J("ngIf",r.isResetPassword))},dependencies:[g.ez,g.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:[".reset[_ngcontent-%COMP%]{width:16.5%;margin-right:5px}label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}"]})}return s})()}}]);