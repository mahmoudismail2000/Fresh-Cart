"use strict";(self.webpackChunkfresh_cart=self.webpackChunkfresh_cart||[]).push([[290],{5290:(v,p,i)=>{i.r(p),i.d(p,{CartComponent:()=>x});var u=i(6814),C=i(1120),t=i(4769),m=i(6286),a=i(8806);function b(o,h){1&o&&(t.TgZ(0,"div",2)(1,"h2"),t._uU(2,"Your Cart Empty ..."),t.qZA()())}function c(o,h){if(1&o){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"div"),t._UZ(3,"img",14),t.qZA()(),t.TgZ(4,"div",15)(5,"div",16)(6,"p",17),t._uU(7),t.qZA(),t.TgZ(8,"p",6),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"div")(12,"button",18,19),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.MAs(13),l=t.oxw(2);return t.KtG(l.removeProduct(s.product._id,d))}),t._UZ(14,"i",20),t._uU(15," Remove "),t.qZA()()(),t.TgZ(16,"div")(17,"button",21,22),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.MAs(18),l=t.oxw(2);return t.KtG(l.updateProductQuantity(s.product._id,s.count-1,d))}),t._uU(19,"-"),t.qZA(),t.TgZ(20,"span",23),t._uU(21),t.qZA(),t.TgZ(22,"button",21,24),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.MAs(23),l=t.oxw(2);return t.KtG(l.updateProductQuantity(s.product._id,s.count+1,d))}),t._uU(24,"+"),t.qZA()()()()}if(2&o){const e=h.$implicit;t.xp6(3),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(4),t.Oqu(e.product.title),t.xp6(2),t.hij("Price : ",t.xi3(10,5,e.price,"e\xa3"),""),t.xp6(12),t.Oqu(e.count)}}const _=function(o){return["/payment",o]};function g(o,h){if(1&o){const e=t.EpF();t.TgZ(0,"section",3)(1,"div",4)(2,"div",5)(3,"div")(4,"h1"),t._uU(5,"Shop Cart"),t.qZA(),t.TgZ(6,"p",6),t._uU(7,"Total Price : "),t.TgZ(8,"span"),t._uU(9),t.qZA()()(),t.TgZ(10,"div")(11,"button",7,8),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(12),s=t.oxw();return t.KtG(s.clearProducts(n))}),t._uU(13,"Clear All"),t.qZA()()(),t.YNc(14,c,25,8,"div",9),t.TgZ(15,"button",10),t._uU(16," Payment Online "),t._UZ(17,"img",11),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(9),t.Oqu(e.productsInCart.totalCartPrice),t.xp6(5),t.Q6J("ngForOf",e.productsInCart.products),t.xp6(1),t.Q6J("routerLink",t.VKq(3,_,e.productsInCart._id))}}let x=(()=>{class o{constructor(e,r,n){this._CartService=e,this._Renderer2=r,this._WishListService=n,this.productsInCart=null}ngOnInit(){this._CartService.getUserCart().subscribe({next:e=>{"success"==e.status&&(this.productsInCart=e.data,this._CartService.countProductsInCart.next(e.numOfCartItems))},error:e=>{console.log(e)}}),this._WishListService.getUserWishlist().subscribe({next:e=>{this._WishListService.countOfProductsInWishlist.next(e.count)},error:e=>{console.log(e)}})}removeProduct(e,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.removeProductFromCart(e).subscribe({next:n=>{this.productsInCart=n.data,this._Renderer2.removeAttribute(r,"disabled"),this._CartService.countProductsInCart.next(n.numOfCartItems)},error:n=>{console.log(n),this._Renderer2.removeAttribute(r,"disabled")}})}updateProductQuantity(e,r,n){this._Renderer2.setAttribute(n,"disabled","true"),r>=1?this._CartService.updateCartProductQuantity(e,r).subscribe({next:s=>{this.productsInCart=s.data,this._Renderer2.removeAttribute(n,"disabled")},error:s=>{console.log(s),this._Renderer2.removeAttribute(n,"disabled")}}):this._Renderer2.removeAttribute(n,"disabled")}clearProducts(e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.clearAllProductInCart().subscribe({next:r=>{this.productsInCart=null,this._Renderer2.removeAttribute(e,"disabled"),this._CartService.countProductsInCart.next(0)},error:r=>{console.log(r),this._Renderer2.removeAttribute(e,"disabled")}})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(m.N),t.Y36(t.Qsj),t.Y36(a.i))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["msNotFound",""],["class","my-5",4,"ngIf","ngIfElse"],[1,"text-center","my-5","py-5"],[1,"my-5"],[1,"p-4","bg-main-light","rounded-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-main"],[1,"btn","btn-outline-danger",3,"click"],["clearElement",""],["class","row border-bottom py-3",4,"ngFor","ngForOf"],[1,"btn-main","my-3",3,"routerLink"],["src","./assets/visa-1.svg","alt","Payment"],[1,"row","border-bottom","py-3"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column"],[1,"m-0","p-0"],[1,"btn","p-0","m-0","text-main",3,"click"],["element",""],[1,"fas","fa-trash-can"],[1,"btn","plus","btn-sm","border-success",3,"click"],["minceElement",""],[1,"px-3"],["plusElement",""]],template:function(r,n){if(1&r&&(t.YNc(0,b,3,0,"ng-template",null,0,t.W1O),t.YNc(2,g,18,5,"section",1)),2&r){const s=t.MAs(1);t.xp6(2),t.Q6J("ngIf",n.productsInCart)("ngIfElse",s)}},dependencies:[u.ez,u.sg,u.O5,u.H9,C.rH],styles:[".plus[_ngcontent-%COMP%]:hover{background-color:#0aad0a}"]})}return o})()},6286:(v,p,i)=>{i.d(p,{N:()=>m});var u=i(5619),C=i(4769),t=i(9862);let m=(()=>{class a{constructor(c){this._HttpClient=c,this.countProductsInCart=new u.X(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}addProductToCart(c){return this._HttpClient.post(this.baseUrl+"cart",{productId:c})}getUserCart(){return this._HttpClient.get(this.baseUrl+"cart")}removeProductFromCart(c){return this._HttpClient.delete(this.baseUrl+`cart/${c}`)}updateCartProductQuantity(c,_){return this._HttpClient.put(this.baseUrl+`cart/${c}`,{count:_})}clearAllProductInCart(){return this._HttpClient.delete(this.baseUrl+"cart")}static#t=this.\u0275fac=function(_){return new(_||a)(C.LFG(t.eN))};static#e=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);