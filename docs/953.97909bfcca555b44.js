"use strict";(self.webpackChunkfresh_cart=self.webpackChunkfresh_cart||[]).push([[953],{7953:(m,l,o)=>{o.r(l),o.d(l,{WishListComponent:()=>P});var h=o(1409),n=o(6814),p=o(1120),t=o(4769),a=o(8806),v=o(2425),c=o(6286);function _(i,d){if(1&i&&t._UZ(0,"i",15),2&i){const s=d.$implicit,r=t.oxw().$implicit;t.ekj("rating-color",r.ratingsAverage>=s)}}function f(i,d){if(1&i){const s=t.EpF();t.TgZ(0,"i",16),t.NdJ("click",function(){t.CHM(s);const e=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.removeProductFromFav(e._id))}),t.qZA()}}const C=function(i){return["/details",i]},g=function(){return[1,2,3,4,5]};function x(i,d){if(1&i){const s=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"header",6),t._UZ(3,"img",7),t.TgZ(4,"span",8),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"cutText"),t.qZA(),t.TgZ(9,"div",9)(10,"span",10),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"span",10),t.YNc(14,_,1,2,"i",11),t._uU(15),t.qZA()()(),t.TgZ(16,"footer")(17,"button",12,13),t.NdJ("click",function(){const u=t.CHM(s).$implicit,T=t.MAs(18),O=t.oxw(2);return t.KtG(O.addProductHomeToCart(u._id,T))}),t._uU(19,"Add To Cart"),t.qZA()(),t.YNc(20,f,1,0,"i",14),t.qZA()()}if(2&i){const s=d.$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("routerLink",t.VKq(15,C,s._id)),t.xp6(1),t.Q6J("src",s.imageCover,t.LSH)("alt",s.title),t.xp6(2),t.Oqu(s.category.name),t.xp6(2),t.Oqu(t.xi3(8,9,s.title,2)),t.xp6(4),t.Oqu(t.xi3(12,12,s.price,"e\xa3")),t.xp6(3),t.Q6J("ngForOf",t.DdM(17,g)),t.xp6(1),t.hij(" ",s.ratingsAverage,""),t.xp6(5),t.Q6J("ngIf",r.productsIdInFav.includes(s._id))}}function I(i,d){if(1&i&&(t.TgZ(0,"section",1)(1,"h1"),t._uU(2,"Favorite Products"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,x,21,18,"div",3),t.qZA()()),2&i){const s=t.oxw();t.xp6(4),t.Q6J("ngForOf",s.products)}}let P=(()=>{class i{constructor(s,r,e,u){this._WishListService=s,this._Renderer2=r,this._ToastrService=e,this._CartService=u,this.products=[],this.productsIdInFav=[]}ngOnInit(){this._WishListService.getUserWishlist().subscribe({next:s=>{this.products=s.data;let r=this.products.map(e=>e._id);this.productsIdInFav=r,this._WishListService.countOfProductsInWishlist.next(s.count)},error:s=>{console.log(s)}}),this._CartService.getUserCart().subscribe({next:s=>{this._CartService.countProductsInCart.next(s.numOfCartItems)},error:s=>{console.log(s)}})}addProductHomeToCart(s,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.addProductToCart(s).subscribe({next:e=>{"success"==e.status&&(this._ToastrService.success(e.message),this._Renderer2.removeAttribute(r,"disabled"),this._CartService.countProductsInCart.next(e.numOfCartItems))},error:e=>{console.log(e),this._Renderer2.removeAttribute(r,"disabled")}})}removeProductFromFav(s){this._WishListService.removeProductFromWishlist(s).subscribe({next:r=>{this.productsIdInFav=r.data,this.products=this.products.filter(e=>this.productsIdInFav.includes(e._id)),this._WishListService.countOfProductsInWishlist.next(r.data.length)},error:r=>{console.log(r)}})}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(a.i),t.Y36(t.Qsj),t.Y36(v._W),t.Y36(c.N))};static#s=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-wish-list"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","my-5",4,"ngIf"],[1,"my-5"],[1,"row","gy-4","gx-2"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2 position-relative overflow-hidden",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2","position-relative","overflow-hidden"],["role","button",1,"product"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"text-main"],[1,"d-flex","justify-content-between"],[1,"small"],["class","fa-solid fa-star",3,"rating-color",4,"ngFor","ngForOf"],[1,"add-btn","btn-main","w-100",3,"click"],["element",""],["class","fa-solid fa-heart heartHome",3,"click",4,"ngIf"],[1,"fa-solid","fa-star"],[1,"fa-solid","fa-heart","heartHome",3,"click"]],template:function(r,e){1&r&&t.YNc(0,I,5,1,"section",0),2&r&&t.Q6J("ngIf",e.products.length>0)},dependencies:[n.ez,n.sg,n.O5,n.H9,p.rH,h.Q]})}return i})()},6286:(m,l,o)=>{o.d(l,{N:()=>t});var h=o(5619),n=o(4769),p=o(9862);let t=(()=>{class a{constructor(c){this._HttpClient=c,this.countProductsInCart=new h.X(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}addProductToCart(c){return this._HttpClient.post(this.baseUrl+"cart",{productId:c})}getUserCart(){return this._HttpClient.get(this.baseUrl+"cart")}removeProductFromCart(c){return this._HttpClient.delete(this.baseUrl+`cart/${c}`)}updateCartProductQuantity(c,_){return this._HttpClient.put(this.baseUrl+`cart/${c}`,{count:_})}clearAllProductInCart(){return this._HttpClient.delete(this.baseUrl+"cart")}static#t=this.\u0275fac=function(_){return new(_||a)(n.LFG(p.eN))};static#s=this.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);